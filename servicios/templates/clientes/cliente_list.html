{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h1 class="my-5">Lista de Clientes</h1>
  <div class="d-flex justify-content-between align-items-center mb-3">
    {% if request.user.is_staff %}
      <a href="{% url 'crear_cliente' %}" class="btn btn-primary">Crear Cliente</a>
    {% endif %}
    <div class="mr-4 search" style="width: 300px;">
      <input type="text" class="form-control w-100" id="search-input" placeholder="Buscar...">
    </div>
  </div>
  {% comment %} ESTILO PARA EL CARD {% endcomment %}
  <div class="card-container">
    {% for cliente in clientes %}
      <div class="card text-center">
        <div class="card-body">
          <h5 class="card-title">NIT: {{ cliente.nit }}</h5>
          <p class="card-text">Razon social: {{ cliente.razon_social }}</p>
          <p class="card-text">Telefono: {{ cliente.telefono }}</p>
          <p class="card-text">Contacto: {{ cliente.contacto }}</p>
          <p class="card-text">Email: {{ cliente.email }}</p>
          <p class="card-text">Direccion: {{ cliente.direccion}}</p>
          <p class="card-text">Creado Por: {{ cliente.created_by}}</p>
          <p class="card-text">
            <i class="fa-brands fa-whatsapp"></i>
            <a href="https://wa.me/{{ cliente.telefono }}" target="_blank">{{ cliente.telefono }}
            </a>
          </p>
          

          <div class="form-buttons">
            {% if request.user.is_staff %}
              <a href="{% url 'cliente_edit' cliente.id %}" class="btn btn-sm btn-warning me-2">Editar</a>
              <a href="{% url 'delete_cliente' cliente.id %}" class="btn btn-sm btn-danger">Eliminar</a>
            {% endif %}
          </div>
        </div>
      </div>
      
    {% empty %}
      <p>No hay clientes registrados.</p>
    {% endfor %}
  </div>
  {% comment %} ESTILO PARA LA TABLA {% endcomment %}
  <table class="table table-striped table-desktop">
      <thead>
        <tr>
          <th>NIT</th>
          <th>Razon social</th>
          <th>Telefono</th>
          <th>Contacto</th>
          <th>Email</th>
          <th>Direccion</th>
          <th>Creado Por</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for cliente in clientes %}
        <tr>
          <td>{{ cliente.nit }}</td>
          <td>{{ cliente.razon_social }}</td>
          <td> <i class="fa-brands fa-whatsapp"></i>
            <a href="https://wa.me/{{ cliente.telefono }}" target="_blank">{{ cliente.telefono }}
          </td>
          <td>{{ cliente.contacto }}</td>
          <td>{{ cliente.email }}</td>
          <td>{{ cliente.direccion}}</td>
          <td>{{ cliente.created_by}}</td>
          <td>
            {% if request.user.is_staff %}
              <a href="{% url 'cliente_edit' cliente.id %}" class="btn btn-sm btn-warning me-2">Editar</a>
              <a href="{% url 'delete_cliente' cliente.id %}" class="btn btn-sm btn-danger">Eliminar</a>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5">No hay clientes registrados.</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
  
</div>
{% endblock %}